<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Physician Bio PDF Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Main styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <div class="header-row">
      <h1>Physician Bio Generator</h1>
      <a
        href="https://www.hopkinsmedicine.org/profiles"
        target="_blank"
        rel="noopener"
        class="search-link"
      >
        Search Doctors
      </a>
    </div>

    <div class="sub">
      Paste the text from the physician's Johns Hopkins page, upload a photo, and generate a printable PDF
      (supports multiple pages; guides show where pages break).
    </div>

    <!-- ===== Input area (text + photo) ===== -->
    <div class="input-grid">
      <div class="input-panel">
        <label for="rawInput">Pasted page text</label>
        <textarea
          id="rawInput"
          placeholder="Paste the physician's page text here..."
        ></textarea>
        <div class="actions">
          <button id="parseBtn">Parse and preview</button>
          <button id="clearBtn" class="ghost">Clear</button>
        </div>
        <div class="hint">
          Tip: Select all (CTRL+A) text on the physician bio page and copy (CTRL+C) it.
          Paste (CTRL+V) it into the above input box. Then Right-click &gt; Copy the physician photo,
          left-click on the gray box to the right and paste (CTRL+V) the image.
        </div>
      </div>

      <div class="photo-upload">
        <label for="photoFile">Upload physician photograph</label>
        <input type="file" id="photoFile" accept="image/*" />
        <div class="photo-preview" id="photoPreview" tabindex="0">
          <span id="photoPreviewText">Paste or upload a photo</span>
          <img id="photoPreviewImg" alt="Physician Photo Preview" />
        </div>
        <div class="hint">
          Recommended aspect ratio is 3:4; the image will be cropped to fit.
          You can also paste an image directly into the gray box.
        </div>
      </div>
    </div>

    <!-- ===== Preview controls & page ===== -->
    <div class="preview-wrap">
      <div class="preview-controls">
        <label>
          <input type="checkbox" id="editToggle" />
          Enable inline editing
        </label>

        <div class="font-size-control">
          <label for="fontSizeSlider">Font size:</label>
          <input
            type="range"
            id="fontSizeSlider"
            min="8"
            max="22"
            value="14"
            step="0.5"
          />
          <span id="fontSizeValue">14px</span>
        </div>

        <span class="editable-hint">
          Click any text in the preview to adjust before exporting.
        </span>

        <button id="printBtn" class="secondary" title="Print this page">
          Print
        </button>

        <button id="downloadBtn" class="secondary" title="Download as PDF">
          Download PDF
        </button>
      </div>

      <!-- PDF Content -->
      <div class="page" id="pdfPage">
        <div class="page-inner" id="pageInner">
          <div class="logo-container">
            <img src="jhm.png" alt="Johns Hopkins Medicine Logo" />
          </div>

          <div class="bio-header">
            <h2 id="nameField">Physician Name</h2>
            <div class="credentials" id="credentialsField">Credentials</div>
            <div class="specialty" id="specialtyField">Specialty</div>
          </div>

          <div class="divider"></div>

          <div class="content-wrapper">
            <div class="photo-box">
              <img id="photoImg" alt="Physician Photo" />
              <div class="photo-placeholder" id="photoPlaceholder"></div>
            </div>

            <div class="fields" id="fieldsColumn">
              <div class="field" data-field="affiliations">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Johns Hopkins Affiliations:</div>
                </div>
                <div class="value" id="affiliationsField">—</div>
              </div>

              <div class="field" data-field="languages">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Languages:</div>
                </div>
                <div class="value" id="languagesField">—</div>
              </div>

              <div class="field" data-field="gender">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Gender:</div>
                </div>
                <div class="value" id="genderField">—</div>
              </div>

              <div class="field" data-field="titles">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Professional Titles:</div>
                </div>
                <ul class="list value" id="titlesList"></ul>
              </div>

              <div class="field" data-field="academic">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Primary Academic Title:</div>
                </div>
                <div class="value" id="academicTitleField">—</div>
              </div>

              <div class="field" data-field="background">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Background:</div>
                </div>
                <div class="value" id="backgroundField">—</div>
              </div>

              <div class="field" data-field="education">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Education:</div>
                </div>
                <ul class="list value" id="educationList"></ul>
              </div>

              <div class="field" data-field="certifications">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Board Certifications:</div>
                </div>
                <ul class="list value" id="certificationsList"></ul>
              </div>

              <div class="field" data-field="memberships">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Memberships:</div>
                </div>
                <ul class="list value" id="membershipsList"></ul>
              </div>

              <div class="field" data-field="locations">
                <div class="field-header">
                  <input type="checkbox" class="section-toggle" checked />
                  <div class="label">Locations:</div>
                </div>
                <div class="value" id="locationsField">—</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Libraries from cdnjs ===== -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.3/jspdf.umd.min.js"
    integrity="sha512-+EeCylkt9WHJk5tGJxYdecHOcXFRME7qnbsfeMsdQL6NUPYm2+uGFmyleEqsmVoap/f3dN/sc3BX9t9kHXkHHg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
    integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- App logic -->
  <script src="app.js"></script>
</body>
</html>
